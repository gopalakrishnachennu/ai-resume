const a="https://ai-resume-gopalakrishnachennu-5461s-projects.vercel.app",l={dashboardUrl:a,fillDelay:75,showOverlay:!0,autoFill:!1};chrome.runtime.onInstalled.addListener(t=>{console.log("[ServiceWorker] Installed:",t.reason),(t.reason==="update"||t.reason==="install")&&chrome.storage.local.remove("jobfiller_ai_cache",()=>{console.log("[ServiceWorker] âœ“ AI cache cleared on update - fresh answers will be generated")}),chrome.storage.local.get(["settings","stats"],e=>{e.settings||chrome.storage.local.set({settings:{dashboardUrl:l.dashboardUrl,autoFill:l.autoFill,showOverlay:l.showOverlay,fillDelay:l.fillDelay}}),e.stats||chrome.storage.local.set({stats:{filledToday:0,cached:0,totalFilled:0,lastReset:Date.now()}})}),chrome.contextMenus.create({id:"jobfiller-fill",title:"Fill with JobFiller Pro",contexts:["page"]})});chrome.contextMenus.onClicked.addListener((t,e)=>{t.menuItemId==="jobfiller-fill"&&(e!=null&&e.id)&&chrome.tabs.sendMessage(e.id,{type:"FILL_FORM"})});chrome.runtime.onMessage.addListener((t,e,o)=>{switch(console.log("[ServiceWorker] Message:",t.type),t.type){case"GET_AUTH":return chrome.storage.local.get(["auth"],r=>{o(r.auth||null)}),!0;case"GET_PROFILE":return chrome.storage.local.get(["profile"],r=>{o(r.profile||null)}),!0;case"LOG_FILL":console.log("[ServiceWorker] Fill logged:",t.data),o({success:!0});break}});chrome.alarms.create("reset-daily-stats",{when:s(),periodInMinutes:24*60});chrome.alarms.onAlarm.addListener(t=>{t.name==="reset-daily-stats"&&chrome.storage.local.get(["stats"],e=>{const o=e.stats||{};o.filledToday=0,o.lastReset=Date.now(),chrome.storage.local.set({stats:o}),console.log("[ServiceWorker] Daily stats reset")})});function s(){const t=new Date,e=new Date(t);return e.setDate(e.getDate()+1),e.setHours(0,0,0,0),e.getTime()}console.log("[ServiceWorker] JobFiller Pro V2 running ðŸš€");
