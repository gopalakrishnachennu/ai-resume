(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&d(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function d(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const u="https://ai-resume-git-feature-9d1c2b-gopalakrishnachennu-5461s-projects.vercel.app",g=document.getElementById("not-connected"),p=document.getElementById("connected"),l=document.getElementById("connect-btn"),c=document.getElementById("fill-btn"),s=document.getElementById("refresh-btn"),a=document.getElementById("settings-btn"),L=document.getElementById("user-name"),E=document.getElementById("user-email"),f=document.getElementById("user-avatar"),h=document.getElementById("stat-filled");async function C(){await v(),x()}async function v(){try{const e=await chrome.storage.local.get(["auth","profile","stats"]);e.auth&&e.auth.uid?b(e.auth,e.stats):m()}catch(e){console.error("Check connection failed:",e),m()}}function b(e,t){g.style.display="none",p.style.display="flex",L.textContent=e.displayName||"User",E.textContent=e.email||"",e.photoURL?f.innerHTML=`<img src="${e.photoURL}" alt="">`:f.textContent=(e.displayName||e.email||"U")[0].toUpperCase(),h.textContent=(t==null?void 0:t.filledToday)||0}function m(){g.style.display="flex",p.style.display="none"}function x(){l==null||l.addEventListener("click",()=>{chrome.tabs.create({url:u})}),c==null||c.addEventListener("click",async()=>{c.classList.add("loading"),c.querySelector(".fill-icon").textContent="↻";try{const[e]=await chrome.tabs.query({active:!0,currentWindow:!0});if(!(e!=null&&e.id)){y("No active tab");return}chrome.tabs.sendMessage(e.id,{type:"FILL_FORM"},t=>{c.classList.remove("loading"),c.querySelector(".fill-icon").textContent="⚡",t!=null&&t.success?(c.querySelector(".fill-icon").textContent="✓",I(t.filled||0),setTimeout(()=>{c.querySelector(".fill-icon").textContent="⚡"},2e3)):y((t==null?void 0:t.error)||"Make sure you are on a job application")})}catch(e){console.error("Fill error:",e),c.classList.remove("loading"),c.querySelector(".fill-icon").textContent="⚡"}}),s==null||s.addEventListener("click",()=>{chrome.tabs.create({url:u})}),a==null||a.addEventListener("click",()=>{})}async function I(e){try{const r=(await chrome.storage.local.get(["stats"])).stats||{filledToday:0};r.filledToday=(r.filledToday||0)+e,await chrome.storage.local.set({stats:r}),h.textContent=r.filledToday}catch(t){console.error("Update stats failed:",t)}}function y(e){alert(e)}document.addEventListener("DOMContentLoaded",C);
